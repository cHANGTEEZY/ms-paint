(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}})();const r=document.getElementById("canvas"),n=r.getContext("2d",{willReadFrequently:!0});r.width=1200;r.height=2e3;let u=!1,i=0,d=0,f=!1,b=2;const c=[];function w(){c.length>100&&c.shift(),c.push(n.getImageData(0,0,r.width,r.height))}function C(){c.length>0?(n.putImageData(c.pop(),0,0),console.log("Canvas state popped:",c.length)):console.log("No more states to undo")}function B(){n.lineJoin="round",n.lineCap="round",n.lineWidth=b}function p(e){u=!0,coordinates.innerHTML=`x: ${e.offsetX}, y: ${e.offsetY}`,w(),i=e.offsetX,d=e.offsetY,n.globalCompositeOperation=f?"destination-out":"source-over",n.beginPath(),n.moveTo(i,d),n.lineTo(i,d),n.stroke()}function y(e){if(!u)return;coordinates.innerHTML=`x: ${e.offsetX}, y: ${e.offsetY}`;const t=e.offsetX,l=e.offsetY;n.lineTo(t,l),n.stroke(),i=t,d=l}function m(){u&&(u=!1,n.closePath())}function I(){f=!f}function D(e){n.strokeStyle=e}function S(e){n.lineWidth=parseInt(e)}document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="z"&&C()});const v=()=>{const e=r.toDataURL();console.log(e);const t=document.createElement("a");t.href=e,t.download="canvas-image",t.click()},P=[{class:"black",name:"Black",color:"black"},{class:"dark-gray",name:"Dark Gray",color:"#2f2f2f"},{class:"red",name:"Red",color:"red"},{class:"orange",name:"Orange",color:"orange"},{class:"yellow",name:"Yellow",color:"yellow"},{class:"green",name:"Green",color:"green"},{class:"blue",name:"Blue",color:"blue"},{class:"purple",name:"Purple",color:"purple"},{class:"pink",name:"Pink",color:"pink"},{class:"brown",name:"Brown",color:"brown"},{class:"white",name:"White",color:"white"},{class:"light-gray",name:"Light Gray",color:"lightgray"},{class:"dark-red",name:"Dark Red",color:"darkred"},{class:"dark-orange",name:"Dark Orange",color:"darkorange"},{class:"dark-yellow",name:"Dark Yellow",color:"goldenrod"},{class:"dark-green",name:"Dark Green",color:"darkgreen"},{class:"dark-blue",name:"Dark Blue",color:"darkblue"},{class:"dark-purple",name:"Dark Purple",color:"indigo"},{class:"dark-pink",name:"Dark Pink",color:"deeppink"},{class:"dark-brown",name:"Dark Brown",color:"saddlebrown"}],T=document.getElementById("color-palette"),x=()=>{P.forEach(e=>{const t=document.createElement("span");t.classList.add("color",e.class),t.title=e.name,t.style.backgroundColor=e.color,T.appendChild(t)})},h=()=>{document.querySelector(".canvas-controllers").classList.toggle("hide")},O=document.getElementById("stroke-size");let Y=1;const M=()=>{for(let e=0;e<8;e++){const t=document.createElement("button");t.innerHTML="click me",t.innerHTML=`${(Y+e)*2}`,t.classList.add("stroke-button"),O.appendChild(t)}},E=document.getElementById("save"),L=document.getElementById("toolbar"),$=document.getElementById("coordinates");function q(){r.removeEventListener("mousedown",p),r.removeEventListener("mousemove",y),r.removeEventListener("mouseup",m),r.removeEventListener("mouseout",m),E.removeEventListener("click",v),L.removeEventListener("click",h)}function H(){x(),M(),$.innerHTML="x:0, y:0",B(),q(),r.addEventListener("mousedown",p),r.addEventListener("mousemove",y),r.addEventListener("mouseup",m),r.addEventListener("mouseout",m),E.addEventListener("click",v),L.addEventListener("click",h)}H();document.addEventListener("click",e=>{const t=e.target.closest(".color");if(t){document.querySelectorAll(".color").forEach(o=>{o.style.border=""}),t.style.border="2px solid black";const a=t.style.backgroundColor;D(a)}const l=e.target.closest(".stroke-button");if(l){document.querySelectorAll(".stroke-button").forEach(o=>{o.style.backgroundColor=""}),l.style.backgroundColor="grey";const a=l.textContent.trim();S(a)}});const k=document.getElementById("toggle-button"),R=document.getElementById("toggle-circle");k.addEventListener("click",()=>{R.classList.toggle("active"),k.classList.toggle("active"),I()});const X=document.getElementById("clear-canvas");X.addEventListener("click",()=>{console.log("click"),n.clearRect(0,0,r.width,r.height)});
